<!-- search_reviews.html -->

{% load static %}

<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static '/review/css/search_reviews.css' %}"
    />
    <title>ë¦¬ë·° ê²€ìƒ‰</title>
  </head>
  <body>
    <div class="page-container">
      <!-- ê²€ìƒ‰ì°½ -->
      <header>
        <div class="search-container">
          <div class="head">
            <!-- ì´ì „ìœ¼ë¡œ ë²„íŠ¼ -->
            <a href="{% url 'review:hospital_reviews' hospital.id %}">
              <img
                src="{% static '/hospital/images/back_icon.svg' %}"
                alt="ì´ì „ìœ¼ë¡œ"
                class="back-button"
              />
            </a>
            <!-- ê²€ìƒ‰ í¼ -->
            <form method="get" action="">
              <input
                type="hidden"
                name="hospital_id"
                value="{{ hospital.id }}"
              />
              <input
                type="text"
                name="keyword"
                class="search-box"
                placeholder="{{ hospital.name }} ë‚´ ë¦¬ë·°ë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”"
                value="{{ keyword }}"
              />
              </div>
              <button type="submit" class="search-button">
                <img
                  src="{% static '/hospital/images/search_icon.svg' %}"
                  alt="ê²€ìƒ‰ ë²„íŠ¼"
                />
              </button>
            </form>

        </div>
      </header>

      <!-- ë¦¬ë·° ê²€ìƒ‰ ê²°ê³¼ -->
      <main class="review-list">
        <!-- ğŸ”½ ì •ë ¬ í¼ (GET ë°©ì‹, keywordëŠ” hiddenìœ¼ë¡œ ìœ ì§€) -->
        <form method="get" action="" class="sort-form">
          <input type="hidden" name="hospital_id" value="{{ hospital.id }}">
          <input type="hidden" name="keyword" value="{{ keyword }}">
          <select name="sort" id="sort" onchange="this.form.submit()" class="sort-select">
            <option value="created" {% if sort == 'created' %}selected{% endif %}>ìµœì‹ ìˆœ</option>
            <option value="rating" {% if sort == 'rating' %}selected{% endif %}>ë³„ì ìˆœ</option>
            <option value="cost" {% if sort == 'cost' %}selected{% endif %}>ì§„ë£Œë¹„ ë§Œì¡±ìˆœ</option>
            <option value="teen" {% if sort == 'teen' %}selected{% endif %}>10ëŒ€ ì¹œí™”ìˆœ</option>
          </select>
        </form>




        {% for review in reviews %}
        <div class="review-card">
          <div class="contents" id="star-content">
            <div class="stars">
              {% for i in star_range %}
                {% if i <= review.rating %}
                  <img src="{% static 'hospital/images/star_fill_small.svg' %}" alt="ë³„ì " class="star-icon" />
                {% else %}
                  <img src="{% static 'hospital/images/star_blank_small.svg' %}" alt="ë¹ˆ ë³„ì " class="star-icon" />
                {% endif %}
              {% endfor %}
            </div>
          </div>
          <div class="contents" id="cost-content">
          <p>Â· ì§„ë£Œë¹„: {{ review.cost_reasonable|yesno:"ë§Œì¡±,ë¶ˆë§Œì¡±" }}</p>
          </div>
          <div class="contents" id="teen-content">
          {% if review.teen_friendly %}
          <p>Â· 10ëŒ€ ì¹œí™”ì </p>
          {% endif %}
          </div>
          <div class="contents" id="content">
          <p>Â· {{ review.content }}</p>
          </div>
        </div>
        {% empty %}
        <p class="no-review">ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endfor %}
      </main>
    </div>
  </body>
</html>
