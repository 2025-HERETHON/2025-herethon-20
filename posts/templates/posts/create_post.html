{% load static %}
<!DOCTYPE html>
<html lang="ko">
<body>
    <div class="create-post-container">
        <div class="header">
            <a href="#" onclick="history.back()" class="back-arrow">&#8592;</a> {# 이전 페이지로 이동 #}
            <h1>게시물 작성</h1>
            <button type="submit" form="post-form" class="submit-button">완료</button>
        </div>

        {% if error_message %}
            <p class="error-message">{{ error_message }}</p>
        {% endif %}

        <form id="post-form" method="POST" action="{% url 'posts:create_post' %}">
            {% csrf_token %}

            <div class="form-group">
                <div class="category-choices">
                    {% for category_dict in categories %} {# categories 뷰에서 전달된 CATEGORIES 사용 #}
                        <input type="radio" id="category-{{ category_dict.slug }}" name="category" value="{{ category_dict.name }}"
                            {% if selected_category == category_dict.name %}checked{% endif %} required>
                        <label for="category-{{ category_dict.slug }}">{{ category_dict.name }}</label>
                    {% endfor %}
                </div>
            </div>

            <div class="form-group">
                <input type="text" id="title" name="title" placeholder="제목을 입력해주세요." value="{{ title|default:'' }}" required>
            </div>

            <div class="form-group">
                <textarea id="content" name="content" placeholder="나의 고민을 자유롭게 이야기해보세요." required>{{ content|default:'' }}</textarea>
            </div>
        </form>
    </div>
</body>
</html>