{# 'Q&A 게시판 - 큐앤에이 - 게시판'에 해당하는 페이지 #}

{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <link rel="stylesheet" href="{% static 'posts/css/post_list.css' %}">
</head>
<body>
    <div class="wrapper">
        <header>
            <div class = "T_name">주제별 게시판</div>
            <div class="header-buttons"> {# 검색창 또는 내 질문/답변으로 이동하는 코드 #}
                <a href="{% url 'posts:post_search' %}" class="icon_box">
                    <img src="{% static 'posts/img/search_img.png' %}" class="icon_img" />
                    <div class="icon_text">검색</div>
                </a>
                <a href="{% url 'posts:my_questions' %}" class="icon_box">
                    <img src="{% static 'posts/img/list_img.png' %}" class="icon_img" />
                    <div class="icon_text">내 질문/답변</div>
                </a>
                
            </div> 
        </header>

        <nav>
            <a href="{% url 'posts:post_list' %}" class="select_menu">
                <span class="text-padding">전체</span>
            </a>

            {% for category in categories %}  {# 저장된 카테고리 종류 표시 #}
                <a href="{% url 'posts:post_list_by_category' category.slug %}" class="select_menu">
                    <span class="text-padding">{{ category.name }}</span>
                </a>
            {% endfor %}
        </nav>

        <ul>
            {% for post in posts %}
                <div class="post-item">
                    <div class="post-content">
                        <a href="{% url 'posts:post_detail' post.id %}" class="post-title-link"> {# 제목 클릭하면 해당 글 상세 페이지로 이동 #}
                        <h3 class="post-title">{{ post.title }}</h3> {# 글 제목 표시 #}
                        <p class ="time">{{ post.content|truncatechars:100 }}</p> {# 본문 미리보기 #}
                        </a>
                        <p class="post-content-preview">{{ post.content|truncatechars:100 }}</p> {# 본문 미리보기 #}
                        <div class="chatbox">
                            <img src="img/chat_img.png" class="chat_img">
                            <div class="chat_count">0</div>
                        </div>
                    </div>
                </div>
                
            {% endfor %}
                {% if current_category %} {# !! 어느 게시판에서 글쓰기 진입하는지에 따라 카테고리 기본값이 달라집니다. 버튼 구현 전이라 임시로 여기에 작성해뒀습니다. !! #}
                    <a href="{% url 'posts:create_post' %}?from_category_slug={{ current_category.slug }}">
                        <img src="img/pen_img.png" class="pen">
                    </a>
                {% else %}
                    {# 전체보기 상태에서 게시글 작성 버튼 눌렀을 때 기본 선택 카테고리 '생리' #}
                    <a href="{% url 'posts:create_post' %}?from_category_slug=saengri">
                        <img src="img/pen_img.png" class="pen">
                    </a>
                {% endif %}
        </ul>
        <div>
            <div class="nav_box">
                <div class="select_box">
                    <img src="img/QnA.png" class="nav_img">
                    <div class="select_text">Q&A</div>
                </div>
                <div class="select_box">
                    <img src="img/hospital_img.png" class="nav_img">
                    <div class="select_text">안심병원추천</div>
                </div>
                <div class="select_box">
                    <img src="img/home_img.png" class="nav_img">
                    <div class="select_text">홈</div>
                </div>
                <div class="select_box">
                    <img src="img/reserve_img.png" class="nav_img">
                    <div class="select_text">간편상담예약</div>
                </div>
                <div class="select_box">
                    <img src="img/profile_img.png" class="nav_img">
                    <div class="select_text">마이페이지</div>
                </div>

            </div>
        </div>
    </div>
</body>
</html>
